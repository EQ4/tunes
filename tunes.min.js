/*!
 * tunes 0.6.0+201311082144
 * https://github.com/ryanve/tunes
 * MIT License 2013 Ryan Van Etten
 */
!function(a,b,c){function d(a,b,c){for(var d,e=0,f=a.length;f>e;)if(d=b.call(c,a[e],e++,a))return d}function e(a,b){a=a||0;var c,d=a/60,e=d/60,f=60*a;return e=e.toFixed(),d=(d%60).toFixed(),a=(a%60).toFixed(),f=(f%60).toFixed(),c=[e,d,a,f],b===!1?c:(c=c.join(b||" : "),c.replace(y,"$10$2"))}function f(a){return a+".tunes"}function g(a){return a.paused||a.ended}function h(a){return(a.nodeName||a).toLowerCase()}function i(a,b){return d(P[b],function(b){return a[b]})||""}function j(a){var b,c=0,d=[];if(!a)return d;for(a="string"==typeof a?a.split(" "):a,b=a.length;b>c;c++)a[c]&&d.push(a[c]);return d}function k(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function l(a,b,c){var d,e="json";if(a="function"==typeof a?a.call(this):a){if("string"!=typeof a)return a;if(a=u(a))return a.substr(-5)==="."+e?t.get(a,function(a){a&&b.call(c,a)},e):d=x(a),d}}function m(a,b){d(b,function(b){null!=b.getAttribute(M)&&(a.find("."+N).length||(b.removeAttribute(M),d(a.children(),function(a){return a===b||t.contains(a,b)?(s=s||t(O),s.insertAfter(a),1):void 0})))})}function n(a,b,c,e,f,g){g=g||0;var h,i,j=c.currentSrc,l=0,m=0,n=f.length;if(j)for(i=j.split(".").pop()||"src";n>l;l++)if(f[l]&&f[l][i]===j){h=f[m=l+g];break}return h||(m=0>g?n-1:0,h=f[m]),c.src=h[i]||"",a.setAttribute("data-tunes-idx",m),A===e&&k(c,B,h[B]),c.play(),d(b,function(a){var b,c,d;if(a&&1===a.nodeType&&(d=a.getAttribute(G),c=a.getAttribute(H),null==d||(null==(d=h[d])?t(a).empty():t(a).html(d)),c=c&&"string"==typeof c&&x(c)))for(b in c)("string"==typeof c[b]||"number"==typeof c[b])&&k(a,b,h[c[b]])}),m}function o(a,b,c,d){var e="data-"+c+"-tunes",g={};return g[e]="",a.find(b).not("["+e+"]").on(f(c),d).attr(g).removeClass(D).addClass(C)}function p(a,b){var c=a.find(".tunes-time");c.length&&b.on(f("timeupdate"),function(){c.html(e(this.currentTime))}).addClass(C).removeClass(D)}function q(a,b){this[b=a.split(".").pop()]||(this[b]=a)}function r(a){return d(this,function(b){function c(){var a=g(k),b="removeClass",c="addClass";this.className="tunes-"+(a?"pause":"play"),x[a?c:b](F)[a?b:c](E)}if(1===b.nodeType){if("function"==typeof a)return!r.call([b],a.call(b));var e,k,s,u,v,w,x=t(b);if(w=a||x.attr("data-tunes"),w&&(w=l(w,r,x),"object"==typeof w&&(w=w?[].concat(w):[],k=x.find(A+","+z)[0])))if(u=h(k),e=t(k),m(x,e),p(x,e),o(x,".tunes-play,.tunes-pause","click",function(){k[g(k)?"play":"pause"]()}),e.on(f("play"),c),e.on(f("pause"),c),v=w.length){for(;v--;)w[v]["track-number"]=v,d(j(w[v].src),q,w[v]),w[v].src=i(w[v],u);s=b.getElementsByTagName("*"),d([".tunes-prev",".tunes-next"],function(a,c){o(x,a,"click",function(){n(b,s,k,u,w,c||-1)})})}else x.attr("data-tunes","")}}),this}var s,t=d(["jQuery","ender"],function(b){if(a[b])return a[b];try{return require(b.toLowerCase())}catch(c){}}),u=t.trim||function(a){return a.replace(/^\s+|\s+$/,"")},v=b.JSON,w=t.parseJson||v&&v.parse,x=function(a){return"string"==typeof a&&(a=u(a))?w(a):null},y=/(^|\D)(\d\D|\d$)/g,z="audio",A="video",B="poster",C="tunes-active",D="tunes-inactive",E="tunes-paused",F="tunes-playing",G="data-tunes-insert",H="data-tunes-attr",I="&#9658;",J="| |",K="&#9658;&#9658;|",L="|&#9668;&#9668;",M="controls",N="tunes-"+M,O="<div class="+N+"><button accesskey=j class=tunes-prev title=previous><span>"+L+"</span></button><button accesskey=p class=tunes-play title=play/pause><span>"+I+"</span><span>"+J+"</span></button><button accesskey=k class=tunes-next title=next><span>"+K+"</span></button><output class=tunes-time></output></div>",P=d([z,A],function(a,b){var e,f=this[a]=[],g=c.createElement(a),h=b?{ogg:['ogg;codecs="theora"'],webm:['webm;codecs="vp8,vorbis"'],mp4:['mp4;codecs="avc1.42E01E"']}:{m4a:["aac;","x-m4a;"],wav:["mpeg;"],ogg:['ogg;codecs="vorbis"'],opus:['ogg;codecs="opus"'],mp3:["mpeg;"]};if(g.canPlayType){a+="/";for(e in h)h.hasOwnProperty(e)&&d(h[e],function(b){var c=g.canPlayType(a+b);return(f[e]="no"!==c&&c||!1)?f["maybe"===c?"push":"unshift"](e):void 0})}return b&&this},{});t.fn.tunes=r,t(c).ready(function(){r.call(t("[data-tunes]"))})}(this,window,document);